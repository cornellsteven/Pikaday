/*!
 * Pikaday
 *
 * Copyright Â© 2013 David Bushell | BSD & MIT license | https://github.com/dbushell/Pikaday
 */

(function(m,l,r){"function"===typeof l&&l.amd?l(function(g){g=g.defined&&g.defined("moment")?g("moment"):void 0;return r(g||m.moment)}):m.Pikaday=r(m.moment)})(window,window.define,function(m){var l="function"===typeof m,r=!!window.addEventListener,g=window.document,t=window.setTimeout,p=function(a,b,c,e){r?a.addEventListener(b,c,!!e):a.attachEvent("on"+b,c)},q=function(a,b,c,e){r?a.removeEventListener(b,c,!!e):a.detachEvent("on"+b,c)},h=function(a,b){return-1!==(" "+a.className+" ").indexOf(" "+
b+" ")},v=function(a){return/Array/.test(Object.prototype.toString.call(a))},j=function(a){return/Date/.test(Object.prototype.toString.call(a))&&!isNaN(a.getTime())},u=function(a){j(a)&&a.setHours(0,0,0,0)},s=function(a,b,c){var e,d;for(e in b)if((d=void 0!==a[e])&&"object"===typeof b[e]&&void 0===b[e].nodeName)j(b[e])?c&&(a[e]=new Date(b[e].getTime())):v(b[e])?c&&(a[e]=b[e].slice(0)):a[e]=s({},b[e],c);else if(c||!d)a[e]=b[e];return a},w={field:null,bound:void 0,format:"YYYY-MM-DD",defaultDate:null,
setDefaultDate:!1,firstDay:0,minDate:null,maxDate:null,yearRange:10,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,isRTL:!1,numberOfMonths:1,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:"January February March April May June July August September October November December".split(" "),weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysShort:"Sun Mon Tue Wed Thu Fri Sat".split(" ")},onSelect:null,onOpen:null,onClose:null,onDraw:null},
x=function(a,b,c){for(b+=a.firstDay;7<=b;)b-=7;return c?a.i18n.weekdaysShort[b]:a.i18n.weekdays[b]},A=function(a,b,c,e,d){if(d)return'<td class="is-empty"></td>';d=[];e&&d.push("is-disabled");c&&d.push("is-today");b&&d.push("is-selected");return'<td data-day="'+a+'" class="'+d.join(" ")+'"><button class="pika-button" type="button">'+a+"</button></td>"},y=function(a){var b=this,c=b.config(a);b._onMouseDown=function(a){if(b._v){a=a||window.event;var d=a.target||a.srcElement;if(d){if(!h(d,"is-disabled")){if(h(d,
"pika-button")&&!h(d,"is-empty")){b.setDate(new Date(b._y,b._m,parseInt(d.innerHTML,10)));c.bound&&t(function(){b.hide()},100);return}h(d,"pika-prev")?b.prevMonth():h(d,"pika-next")&&b.nextMonth()}if(h(d,"pika-select"))b._c=!0;else if(a.preventDefault)a.preventDefault();else return a.returnValue=!1}}};b._onChange=function(a){a=a||window.event;(a=a.target||a.srcElement)&&(h(a,"pika-select-month")?b.gotoMonth(a.value):h(a,"pika-select-year")&&b.gotoYear(a.value))};b._onInputChange=function(a){a.firedBy!==
b&&(a=l?(a=m(c.field.value,c.format))&&a.isValid()?a.toDate():null:new Date(Date.parse(c.field.value)),b.setDate(j(a)?a:null),b._v||b.show())};b._onInputFocus=function(){b.show()};b._onInputClick=function(){b.show()};b._onInputBlur=function(){b._c||(b._b=t(function(){b.hide()},50));b._c=!1};b._onClick=function(a){a=a||window.event;var d=a=a.target||a.srcElement;if(a){!r&&h(a,"pika-select")&&!a.onchange&&(a.setAttribute("onchange","return;"),p(a,"change",b._onChange));do if(h(d,"pika-single"))return;
while(d=d.parentNode);b._v&&a!==c.trigger&&b.hide()}};b.el=g.createElement("div");b.el.className="pika-single"+(c.isRTL?" is-rtl":"");p(b.el,"mousedown",b._onMouseDown,!0);p(b.el,"change",b._onChange);c.field&&(c.bound?g.body.appendChild(b.el):c.field.parentNode.insertBefore(b.el,c.field.nextSibling),p(c.field,"change",b._onInputChange),c.defaultDate||(c.defaultDate=l&&c.field.value?m(c.field.value,c.format).toDate():new Date(Date.parse(c.field.value)),c.setDefaultDate=!0));a=c.defaultDate;j(a)?c.setDefaultDate?
b.setDate(a,!0):b.gotoDate(a):b.gotoDate(new Date);c.bound?(this.hide(),b.el.className+=" is-bound",p(c.trigger,"click",b._onInputClick),p(c.trigger,"focus",b._onInputFocus),p(c.trigger,"blur",b._onInputBlur)):this.show()};y.prototype={config:function(a){this._o||(this._o=s({},w,!0));a=s(this._o,a,!0);a.isRTL=!!a.isRTL;a.field=a.field&&a.field.nodeName?a.field:null;a.bound=!!(void 0!==a.bound?a.field&&a.bound:a.field);a.trigger=a.trigger&&a.trigger.nodeName?a.trigger:a.field;var b=parseInt(a.numberOfMonths,
10)||1;a.numberOfMonths=4<b?4:b;j(a.minDate)||(a.minDate=!1);j(a.maxDate)||(a.maxDate=!1);a.minDate&&a.maxDate&&a.maxDate<a.minDate&&(a.maxDate=a.minDate=!1);a.minDate&&(u(a.minDate),a.minYear=a.minDate.getFullYear(),a.minMonth=a.minDate.getMonth());a.maxDate&&(u(a.maxDate),a.maxYear=a.maxDate.getFullYear(),a.maxMonth=a.maxDate.getMonth());v(a.yearRange)?(b=(new Date).getFullYear()-10,a.yearRange[0]=parseInt(a.yearRange[0],10)||b,a.yearRange[1]=parseInt(a.yearRange[1],10)||b):(a.yearRange=Math.abs(parseInt(a.yearRange,
10))||w.yearRange,100<a.yearRange&&(a.yearRange=100));return a},toString:function(a){return!j(this._d)?"":l?m(this._d).format(a||this._o.format):this._d.toDateString()},getMoment:function(){return l?m(this._d):null},setMoment:function(a){l&&m.isMoment(a)&&this.setDate(a.toDate())},getDate:function(){return j(this._d)?new Date(this._d.getTime()):null},setDate:function(a,b){if(!a)return this._d=null,this.draw();"string"===typeof a&&(a=new Date(Date.parse(a)));if(j(a)){var c=this._o.minDate,e=this._o.maxDate;
j(c)&&a<c?a=c:j(e)&&a>e&&(a=e);this._d=new Date(a.getTime());u(this._d);this.gotoDate(this._d);if(this._o.field){this._o.field.value=this.toString();var c=this._o.field,e={firedBy:this},d;g.createEvent?(d=g.createEvent("HTMLEvents"),d.initEvent("change",!0,!1),d=s(d,e),c.dispatchEvent(d)):g.createEventObject&&(d=g.createEventObject(),d=s(d,e),c.fireEvent("onchange",d))}!b&&"function"===typeof this._o.onSelect&&this._o.onSelect.call(this,this.getDate())}},setMinDate:function(a){this._o.minDate=a;!1!==
a&&(this.setMinYear(a.getFullYear()),this.setMinMonth(a.getMonth()))},setMaxDate:function(a){this._o.maxDate=a;!1!==a&&(this.setMaxYear(a.getFullYear()),this.setMaxMonth(a.getMonth()))},setMinYear:function(a){this._o.minYear=a},setMaxYear:function(a){this._o.maxYear=a},setMinMonth:function(a){this._o.minMonth=a},setMaxMonth:function(a){this._o.maxMonth=a},gotoDate:function(a){j(a)&&(this._y=a.getFullYear(),this._m=a.getMonth(),this.draw())},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(a){if(!isNaN(a=
parseInt(a,10)))this._m=0>a?0:11<a?11:a,this.draw()},nextMonth:function(){11<++this._m&&(this._m=0,this._y++);this.draw()},prevMonth:function(){0>--this._m&&(this._m=11,this._y--);this.draw()},gotoYear:function(a){isNaN(a)||(this._y=parseInt(a,10),this.draw())},draw:function(a){if(this._v||a){var b=this._o;a=b.minYear;var c=b.maxYear,e=b.minMonth,d=b.maxMonth;this._y<=a&&(this._y=a,!isNaN(e)&&this._m<e&&(this._m=e));this._y>=c&&(this._y=c,!isNaN(d)&&this._m>d&&(this._m=d));a=this.el;for(var f=this._o,
g=this._m,k=this._y,n=k===f.minYear,z=k===f.maxYear,j='<div class="pika-title">',h=!0,m=!0,d=[],c=0;12>c;c++)d.push('<option value="'+c+'"'+(c===g?" selected":"")+(n&&c<f.minMonth||z&&c>f.maxMonth?"disabled":"")+">"+f.i18n.months[c]+"</option>");j+='<div class="pika-label">'+f.i18n.months[g]+'<select class="pika-select pika-select-month">'+d.join("")+"</select></div>";v(f.yearRange)?(c=f.yearRange[0],e=f.yearRange[1]+1):(c=k-f.yearRange,e=1+k+f.yearRange);for(d=[];c<e&&c<=f.maxYear;c++)c>=f.minYear&&
d.push('<option value="'+c+'"'+(c===k?" selected":"")+">"+c+"</option>");j+='<div class="pika-label">'+k+'<select class="pika-select pika-select-year">'+d.join("")+"</select></div>";if(n&&(0===g||f.minMonth>=g))h=!1;if(z&&(11===g||f.maxMonth<=g))m=!1;j+='<button class="pika-prev'+(h?"":" is-disabled")+'" type="button">'+f.i18n.previousMonth+"</button>";j+='<button class="pika-next'+(m?"":" is-disabled")+'" type="button">'+f.i18n.nextMonth+"</button>";a.innerHTML=j+"</div>"+this.render(this._y,this._m);
b.bound&&(this.adjustPosition(),"hidden"!==b.field.type&&t(function(){b.trigger.focus()},1));if("function"===typeof this._o.onDraw){var l=this;t(function(){l._o.onDraw.call(l)},0)}}},adjustPosition:function(){var a=this._o.trigger,b=a,c=this.el.offsetWidth,e=this.el.offsetHeight,d=window.innerWidth||g.documentElement.clientWidth,f=window.innerHeight||g.documentElement.clientHeight,j=window.pageYOffset||g.body.scrollTop||g.documentElement.scrollTop,k,n;if("function"===typeof a.getBoundingClientRect)b=
a.getBoundingClientRect(),k=b.left+window.pageXOffset,n=b.bottom+window.pageYOffset;else{k=b.offsetLeft;for(n=b.offsetTop+b.offsetHeight;b=b.offsetParent;)k+=b.offsetLeft,n+=b.offsetTop}k+c>d&&(k=k-c+a.offsetWidth);n+e>f+j&&(n=n-e-a.offsetHeight);this.el.style.cssText="position:absolute;left:"+k+"px;top:"+n+"px;"},render:function(a,b){var c=this._o,e=new Date,d=[31,0===a%4&&0!==a%100||0===a%400?29:28,31,30,31,30,31,31,30,31,30,31][b],f=(new Date(a,b,1)).getDay(),g=[],k=[];u(e);0<c.firstDay&&(f-=c.firstDay,
0>f&&(f+=7));for(var n=d+f,h=n;7<h;)h-=7;for(var n=n+(7-h),m=h=0;h<n;h++){var l=new Date(a,b,1+(h-f)),p=c.minDate&&l<c.minDate||c.maxDate&&l>c.maxDate,q=j(this._d)?l.getTime()===this._d.getTime():!1,l=l.getTime()===e.getTime();k.push(A(1+(h-f),q,l,p,h<f||h>=d+f));7===++m&&(g.push("<tr>"+(c.isRTL?k.reverse():k).join("")+"</tr>"),k=[],m=0)}d=[];for(e=0;7>e;e++)d.push('<th scope="col"><abbr title="'+x(c,e)+'">'+x(c,e,!0)+"</abbr></th>");return'<table cellpadding="0" cellspacing="0" class="pika-table">'+
("<thead>"+(c.isRTL?d.reverse():d).join("")+"</thead>")+("<tbody>"+g.join("")+"</tbody>")+"</table>"},isVisible:function(){return this._v},show:function(){if(!this._v){this._o.bound&&p(g,"click",this._onClick);var a=this.el,b;b=(" "+a.className+" ").replace(" is-hidden "," ");b=b.trim?b.trim():b.replace(/^\s+|\s+$/g,"");a.className=b;this._v=!0;this.draw();"function"===typeof this._o.onOpen&&this._o.onOpen.call(this)}},hide:function(){var a=this._v;if(!1!==a){this._o.bound&&q(g,"click",this._onClick);
this.el.style.cssText="";var b=this.el;h(b,"is-hidden")||(b.className=""===b.className?"is-hidden":b.className+" is-hidden");this._v=!1;void 0!==a&&"function"===typeof this._o.onClose&&this._o.onClose.call(this)}},destroy:function(){this.hide();q(this.el,"mousedown",this._onMouseDown,!0);q(this.el,"change",this._onChange);this._o.field&&(q(this._o.field,"change",this._onInputChange),this._o.bound&&(q(this._o.trigger,"click",this._onInputClick),q(this._o.trigger,"focus",this._onInputFocus),q(this._o.trigger,
"blur",this._onInputBlur)));this.el.parentNode&&this.el.parentNode.removeChild(this.el)}};return y});